<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An R package for calculating and analyzing food demand and in accordance with the Edmonds et al. food demand model • ambrosia</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="An R package for calculating and analyzing food demand and in accordance with the Edmonds et al. food demand model">
<meta property="og:description" content="The `ambrosia` R package was developed to calculate food demand for staples and non-staple commodities that is responsive to changing levels of incomes and prices. Ambrosia implements the framework to quantify food demand as established by Edmonds et al. (2017) and allows the user to explore and estimate different variables related to the food demand system.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ambrosia</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/ambrosia_vignette.html">`ambrosia`: User Tutorial</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="ambrosia-an-r-package-for-calculating-and-analyzing-food-demand-and-in-accordance-with-the-edmonds-et-al-food-demand-model" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ambrosia-an-r-package-for-calculating-and-analyzing-food-demand-and-in-accordance-with-the-edmonds-et-al-food-demand-model" class="anchor"></a><code>ambrosia</code>: An R package for calculating and analyzing food demand and in accordance with the Edmonds et al. food demand model</h1></div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>The <code>ambrosia</code> R package was developed to calculate food demand for staples and non-staple commodities that is responsive to changing levels of incomes and prices. Ambrosia implements the framework to quantify food demand as established by Edmonds et al. (2017) and allows the user to explore and estimate different variables related to the food demand system. Currently <code>ambrosia</code> provides three main functions:</p>
<ol>
<li>calculation of food demand for any given set of parameters including income levels and prices,</li>
<li>estimation of parameters within a given a dataset. Note: <code>ambrosia</code> is used to calculate parameters for the food demand model implemented in the <a href="http://www.globalchange.umd.edu/gcam/">Global Change Analysis Model</a>.</li>
<li>exploration and preparation of raw data before starting a parameter estimation.</li>
</ol>
</div>
<div id="getting-started-with-ambrosia" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started-with-ambrosia" class="anchor"></a>Getting Started with <code>ambrosia</code>
</h2>
<p><code>ambrosia</code> can be directly installed from its GitHub repository using the R <code>devtools</code> package. From an R prompt, run the command,</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">'JGCRI/ambrosia'</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></pre></div>
</div>
<div id="user-tutorial-and-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#user-tutorial-and-examples" class="anchor"></a>User tutorial and examples</h2>
<p>A list of examples along with a user tutorial describing the different features in <code>ambrosia</code> are available in the <a href="https://jgcri.github.io/ambrosia/articles/ambrosia_vignette.html"><code>ambrosia_vignette.rmd</code></a>. To load the vignette with examples for the major functions within ambrosia, run the following command</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span><span class="op">(</span><span class="st">"ambrosia_vignette"</span><span class="op">)</span></pre></div>
<p>The example below shows how a user can get an estimate of demand using some sample parameters (See the table below for description of parameters).</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="co">#Get a sample data set</span>
<span class="va">Test_Data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0.1</span>,<span class="fl">30</span>, by<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>

<span class="co">#Add sample values of Ps and Pn</span>
<span class="va">Test_Data</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>Ps<span class="op">=</span><span class="fl">0.1</span>,Pn<span class="op">=</span><span class="fl">0.2</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Test_Data</span>

<span class="co">#Add some sample parameters</span>
<span class="va">sample_parameters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.28</span>,<span class="fl">1.14</span>,<span class="op">-</span><span class="fl">0.19</span>,<span class="fl">0.21</span>,<span class="op">-</span><span class="fl">0.33</span>,<span class="fl">0.5</span>,<span class="fl">0.1</span>,<span class="fl">16</span>,<span class="fl">5.06</span>,<span class="fl">100</span>,<span class="fl">20</span><span class="op">)</span>

<span class="co">#Now calculate food demand</span>
<span class="va">Food_Demand</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/food.dmnd.html">food.dmnd</a></span><span class="op">(</span><span class="va">Test_Data</span><span class="op">$</span><span class="va">Ps</span>,<span class="va">Test_Data</span><span class="op">$</span><span class="va">Pn</span>,<span class="va">Test_Data</span><span class="op">$</span><span class="va">Y</span>,params<span class="op">=</span><span class="fu"><a href="reference/vec2param.html">vec2param</a></span><span class="op">(</span><span class="va">sample_parameters</span><span class="op">)</span><span class="op">)</span></pre></div>
<p>The code from the example can be used to visualize the food demand for staples and non-staples as follows,</p>
<p><img src="articles/example_3.png" alt="A simple plot of food demand for staples and non-staples for changing incomes and constant prices."></p>
<div id="description-of-parameters" class="section level4">
<h4 class="hasAnchor">
<a href="#description-of-parameters" class="anchor"></a>Description of parameters</h4>
<p>The 11 parameters are described in table below with values from the latest version of ambrosia. The table also contains an acceptable range for each of the parameters. The original parameters were calculated using a Markov Chain Monte Carlo (MCMC) approach. The range is calculated as the 95% Joint Confidence Interval of the range of the parameters apperaing in all Monte Carlo samples with likelihood values above the 5th percentile.</p>
<table class="table">
<colgroup>
<col width="4%">
<col width="80%">
<col width="4%">
<col width="2%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th>Parameter name</th>
<th>Description</th>
<th>Units</th>
<th>Value</th>
<th>Range of parameter values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>A_s</code></td>
<td>A scale term used to derive expenditure share for staple demand</td>
<td>Unitless</td>
<td>1.28</td>
<td>1.25 -1.40</td>
</tr>
<tr class="even">
<td><code>A_n</code></td>
<td>A scale term used to derive expenditure share for non-staple demand.</td>
<td>Unitless</td>
<td>1.14</td>
<td>0.9 - 1.16</td>
</tr>
<tr class="odd">
<td><code>xi_ss</code></td>
<td>Price elasticity of staple goods. Unit change in per capita demand for staples as a result of unit increase in price (in $ per person per day).</td>
<td>Elasticity</td>
<td>-0.19</td>
<td>-0.27 - -0.07</td>
</tr>
<tr class="even">
<td><code>xi_cross</code></td>
<td>Cross price elasticity between staples and non-staples which in combination with the other price elasticities is used to derive substitution elasticity.</td>
<td>Elasticity</td>
<td>0.21</td>
<td>0.09 - 0.27</td>
</tr>
<tr class="odd">
<td><code>xi_nn</code></td>
<td>Price elasticity of non-staple goods. Unit change in per capita demand for non-staples as a result of unit increase in price (in $ per person per day).</td>
<td>Elasticity</td>
<td>-0.3</td>
<td>-0.46 - -0.10</td>
</tr>
<tr class="even">
<td><code>nu1_n</code></td>
<td>Income elasticity for non-staple goods. Unit change in per capita demand for non-staples for unit change in income (in thousand USD).</td>
<td>Elasticity</td>
<td>0.5</td>
<td>0.46 - 0.61</td>
</tr>
<tr class="odd">
<td><code>lambda_s</code></td>
<td>Income elasticity for staple goods. Unit change in per capita demand for staples for unit change in income (in thousand USD)</td>
<td>Elasticity</td>
<td>0.1</td>
<td>0.075 - 0.16</td>
</tr>
<tr class="even">
<td><code>k_s</code></td>
<td>Log of Income level at which staple demand is anticipated to be at its highest</td>
<td>Thousand USD</td>
<td>16</td>
<td>10 -17</td>
</tr>
<tr class="odd">
<td><code>psscl</code></td>
<td>Additional scaling term used to derive the expenditure shares for staples. This is applied to price of staples (<code>Ps</code>/<code>Pm</code> * <code>psscl</code>), where Ps is the price of staples and Pm is the price of materials and to the expenditure shares of staples (<code>alpha_s</code>).</td>
<td>Unitless</td>
<td>100</td>
<td>80 - 120</td>
</tr>
<tr class="even">
<td><code>pnscl</code></td>
<td>Additional scaling term used to derive the expenditure shares for non-staples. This is applied to price of non-staples (<code>Pn</code>/<code>Pm</code> * <code>pnscl</code>), where Pn is the price of non-staples and Pm is the price of materials and to the expenditure shares of non-staples (<code>alpha_n</code>).</td>
<td>Unitless</td>
<td>20</td>
<td>18 - 25</td>
</tr>
</tbody>
</table>
</div>
<div id="simple-example-of-equations-to-derive-demand-using-parameters-described-above" class="section level4">
<h4 class="hasAnchor">
<a href="#simple-example-of-equations-to-derive-demand-using-parameters-described-above" class="anchor"></a>Simple example of equations to derive demand using parameters described above.</h4>
<p>Below is a simple example of how quantities of demand for staples (<code>Q_s</code>) and non-staples (<code>Q_n</code>) in thousand calories are calculated using the above 11 parameters above for an income level of <code>Y</code> in thousand USD for a staple price of <code>Ps</code> in $ per capita per day and non-staple price of <code>Pn</code> in $ per capita per day.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># 1) Staple demand</span></span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a>Q_s &lt;-<span class="st"> </span>A_s <span class="op">*</span><span class="st"> </span>Ps <span class="op">^</span><span class="st"> </span>xi_ss <span class="op">*</span><span class="st"> </span>Pn <span class="op">^</span><span class="st"> </span>xi_cross <span class="op">*</span><span class="st"> </span>Income_Term_staples   </span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a>where,</span>
<span id="cb4-6"><a href="#cb4-6"></a></span>
<span id="cb4-7"><a href="#cb4-7"></a>Income_term_staples &lt;-<span class="st"> </span>(k_s <span class="op">*</span><span class="st"> </span>Y) <span class="op">^</span><span class="st"> </span>(lambda_s <span class="op">/</span><span class="st"> </span>Y)</span>
<span id="cb4-8"><a href="#cb4-8"></a></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co"># 2) Non-staple demand</span></span>
<span id="cb4-10"><a href="#cb4-10"></a></span>
<span id="cb4-11"><a href="#cb4-11"></a>Q_n &lt;-<span class="st"> </span>A_s <span class="op">*</span><span class="st"> </span>Ps <span class="op">^</span><span class="st"> </span>xi_cross <span class="op">*</span><span class="st"> </span>Pn <span class="op">^</span><span class="st"> </span>xi_nn <span class="op">*</span><span class="st"> </span>Income_Term_Non_staples</span>
<span id="cb4-12"><a href="#cb4-12"></a></span>
<span id="cb4-13"><a href="#cb4-13"></a>where,</span>
<span id="cb4-14"><a href="#cb4-14"></a></span>
<span id="cb4-15"><a href="#cb4-15"></a>Income_Term_Non_staples &lt;-<span class="st"> </span>Y <span class="op">^</span><span class="st"> </span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>nu1_n)</span></code></pre></div>
</div>
</div>
<div id="contributing-to-ambrosia" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing-to-ambrosia" class="anchor"></a>Contributing to <code>ambrosia</code>
</h2>
<p>We welcome contributions to <code>ambrosia</code> from the development community. Please contact us at the email IDs below if you want to collaborate! The <code>ambrosia</code> GitHub repository is accessible here: <a href="https://github.com/JGCRI/ambrosia">GitHub Repository</a>. In order to report issues with <code>ambrosia</code>, please open an issue in the above mentioned Github Repository.</p>
<p>For more information about contributing, please contact Kanishka Narayan at <a href="mailto:kanishka.narayan@pnnl.gov" class="email">kanishka.narayan@pnnl.gov</a> or Chris Vernon at <a href="mailto:chris.vernon@pnnl.gov" class="email">chris.vernon@pnnl.gov</a></p>
</div>
</div>
<div id="availability" class="section level1">
<h1 class="hasAnchor">
<a href="#availability" class="anchor"></a>Availability</h1>
<div id="operating-system" class="section level2">
<h2 class="hasAnchor">
<a href="#operating-system" class="anchor"></a>Operating system</h2>
<p>Mac OS X; Linux; Windows 10</p>
</div>
<div id="programming-language" class="section level2">
<h2 class="hasAnchor">
<a href="#programming-language" class="anchor"></a>Programming language</h2>
<p>R (&gt;= 3.5.0)</p>
</div>
<div id="dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#dependencies" class="anchor"></a>Dependencies</h2>
<p>dplyr (&gt;= 0.7)</p>
<p>nleqslv (&gt;= 3.2)</p>
<p>reshape2 (&gt;= 1.4.3)</p>
<p>ggplot2 (&gt;= 2.2.1)</p>
<p>cluster (&gt;= 2.0)</p>
<p>tidyr (&gt;= 0.7.1)</p>
</div>
<div id="code-repository" class="section level2">
<h2 class="hasAnchor">
<a href="#code-repository" class="anchor"></a>Code repository</h2>
<p>Name- GitHub; <code>JGCRI/ambrosia</code></p>
<p>Identifier- <a href="https://github.com/JGCRI/ambrosia/tree/v1.3.0" class="uri">https://github.com/JGCRI/ambrosia/tree/v1.3.0</a></p>
<p>License- BSD 2-Clause</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>BSD2</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing ambrosia</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Kanishka Narayan <br><small class="roles"> Author, maintainer </small>  </li>
<li>Chris Vernon <br><small class="roles"> Author </small>  </li>
<li>Stephanie Waldhoff <br><small class="roles"> Author </small>  </li>
<li>James Edmonds <br><small class="roles"> Author </small>  </li>
<li>Ryna Cui <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://codecov.io/gh/JGCRI/ambrosia"><img src="https://codecov.io/gh/JGCRI/ambrosia/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/69679416"><img src="https://zenodo.org/badge/69679416.svg" alt="DOI"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Kanishka Narayan, Chris Vernon, Stephanie Waldhoff, James Edmonds, Ryna Cui.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
